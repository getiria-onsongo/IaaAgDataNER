# Switch to this folder
cd /Users/gonsongo/Desktop/research/iaa/Projects/python/IaaAgDataNER/

# Create a config file to use for training
python -m spacy init config ner.cfg --lang "en" --pipeline "ner" --optimize "accuracy" --force

# Create test data
python -m spacy convert --converter json devData.json TrainingData

# Create training data
python -m spacy convert --converter json trainData.json TrainingData

# Train
python -m spacy train ner.cfg --output ner_model --paths.train TrainingData/trainData.spacy --paths.dev TrainingData/devData.spacy

# HERE
source_nlp = spacy.load("en_core_web_sm")
nlp_agdata = spacy.load("ner_model/model-best")
nlp_agdata.disable_pipes('tok2vec')
nlp_agdata.add_pipe("parser", before="ner",source=source_nlp)
nlp_agdata.add_pipe("tagger", before="parser",source=source_nlp)
nlp_agdata.pipe_names


# Activate NER environment
conda activate ner

# Create an environment
conda create -n ner python=3.8 spacy=3 -y

conda create -n nerSpacy2 spacy=2 -y

# To activate this environment
conda activate ner

# Download English model
python3.8 -m spacy download en_core_web_sm

# Install transformer package. It is sometimes using in training
pip install spacy-transformers


# To deactivate an active environment
conda deactivate

# To remove an environment
conda remove --name ner --all -y

# To list environments
conda env list


# To delete files from git
git rm -r --cached src/__pycache__/
 
